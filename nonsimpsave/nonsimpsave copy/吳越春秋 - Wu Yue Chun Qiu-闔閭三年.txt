三年，吳將欲伐楚，未行。伍子胥、白喜相謂曰：「吾等為王養士，畫其策謀，有利於國，而王故伐楚。出其令，託而無興師之意，奈何？」有頃，吳王問子胥、白喜曰：「寡人欲出兵於二子，何如？」子胥、白喜對曰：「臣願用命。」吳王內計二子皆怨楚，深恐以兵往破滅而已。登臺向南風而嘯，有頃而嘆，群臣莫有曉王意者。子胥深知王之不定，乃薦孫子於王。
孫子者，名武，吳人也，善為兵法。辟隱深居，世人莫知其能。胥乃明知鑒辯，知孫子可以折衝銷敵，乃一旦與吳王論兵，七薦孫子。吳王曰：子胥託言進士，欲以自納。
而召孫子，問以兵法，每陳一篇，王不知口之稱善。其意大悅。問曰：「兵法寧可以小試耶？」孫子曰：「可，可以小試於後宮之女。」王曰：「諾。」孫子曰：「得大王寵姬二人以為軍隊長，各將一隊。」令三百人皆被甲兜鍪，操劍盾而立，告以軍法，隨鼓進退，左右迴旋，使知其禁。乃令曰：「一鼓皆振，二鼓操進，三鼓為戰形。」於是宮女皆掩口而笑。孫子乃親自操枹擊鼓，三令五申，其笑如故。孫子顧視諸女，連笑不止。孫子大怒，兩目忽張，聲如駭虎，髮上衝冠，項旁絕纓。顧謂執法曰：「取鈇鑕。」孫子曰：「約束不明，申令不信，將之罪也。既以約束，三令五申，卒不卻行，士之過也。軍法如何？」執法曰：「斬！」武乃令斬隊長二人，即吳王之寵姬也。吳王登臺觀望，正見斬二愛姬，馳使下之令曰：「寡人已知將軍用兵矣。寡人非此二姬食不甘味，宜勿斬之。」孫子曰：「臣既已受命為將，將法在軍，君雖有令，臣不受之。」孫子復撝鼓之，當左右進退，迴旋規矩，不敢瞬目，二隊寂然無敢顧者。於是乃報吳王，曰：「兵已整齊，願王觀之，惟所欲用，使赴水火猶無難矣，而可以定天下。」吳王忽然不悅，曰：「寡人知子善用兵，雖可以霸，然而無所施也。將軍罷兵就舍，寡人不願。」孫子曰：「王徒好其言，而不用其實。」
子胥諫曰：「臣聞，兵者凶事，不可空試。故為兵者，誅伐不行，兵道不明。今大王虔心思士，欲興兵戈以誅暴楚，以霸天下而威諸侯，非孫武之將，而誰能涉淮踰泗，越千里而戰者乎？」於是吳王大悅，因鳴鼓會軍，集而攻楚。孫子為將，拔舒，殺吳亡將二公子蓋餘、燭傭。謀欲入郢，孫武曰：「民勞，未可，恃也。」
楚聞吳使孫子、伍子胥、白喜為將，楚國苦之，群臣皆怨，咸言費無忌讒殺伍奢、白州犁，而吳侵境，不絕於寇，楚國群臣有一朝之患。於是司馬成乃謂子常曰：「太傅伍奢，左尹白州犁，邦人莫知其罪，君與王謀誅之，流謗於國，至于今日，其言不絕，誠惑之。蓋聞仁者殺人以掩謗者，猶弗為也。今子殺人以興謗於國，不亦異乎？夫費無忌，楚之讒口，民莫知其過。今無辜殺三賢士，以結怨於吳，內傷忠臣之心，外為鄰國所笑。且郤伍之家，出奔於吳，吳新有伍員、白喜，秉威銳志，結讎於楚。故彊敵之兵，日駭楚國，有事，子即危矣。夫智者除讒以自安，愚者受佞以自亡。今子受讒，國以危矣。」子常曰：「是曩之罪也，敢不圖之，」九月，子常與昭王共誅費無忌，遂滅其族，國人乃謗止。
吳王有女滕玉，因謀伐楚，與夫人及女會蒸魚，王前嘗半而與女，女怒曰：「王食魚辱我，不忘久生。」乃自殺。闔閭痛之，葬於國西閶門。外鑿池積土，文石為槨，題湊為中，金鼎玉杯、銀樽珠襦之寶，皆以送女。乃舞白鶴於吳市中，令萬民隨而觀之，還使男女與鶴俱入羨門，因發機以掩之。殺生以送死，國人非之。
湛盧之劍，惡闔閭之無道也，乃去而出，水行如楚。
楚昭王臥而寤得吳王湛盧之劍於床。昭王不知其故，乃召風湖子而問曰：「寡人臥覺而得寶劍，不知其名，是何劍也？」風湖子曰：「此謂湛盧之劍。」昭王曰：「何以言之？」風湖子曰：「臣聞吳王得越所獻寶劍三枚：一曰魚腸，二曰磐郢，三曰湛盧。魚腸之劍，已用殺吳王僚也；磐郢以送其死女；今湛盧入楚也。」昭王曰：「湛盧所以去者何也？」風湖子曰：「臣聞越王元常使歐冶子造劍五枚以示薛燭，燭對曰：『魚腸劍逆理不順，不可服也，臣以殺君，子以殺父。』故闔閭以殺王僚。『一名磐郢，亦曰豪曹，不法之物，無益於人。』故以送死。『一名湛盧，五金之英，太陽之精，寄氣託靈，出之有神，服之有威，可以折衝拒敵。然人君有逆理之謀，其劍即出，故去無道以就有道。』今吳王無道，殺君謀楚，故湛盧入楚。」昭王曰：「其直幾何？」風湖子曰：「臣聞此劍在越之時，客有酬其直者：有市之鄉三十，駿馬千匹，萬戶之都二。是其一也。薛燭對曰：『赤堇之山已令無雲，若耶之溪深而莫測，群臣上天，歐冶死矣。雖傾城量金，珠玉盈河，猶不能得此寶，而況有市之鄉，駿馬千匹，萬戶之都，何足言也？』」昭王大悅，遂以為寶。
闔閭聞楚得湛盧之劍，因斯發怒，遂使孫武、伍胥、白喜伐楚。子胥陰令宣言於楚曰：「楚用子期為將，吾即得而殺之；子常用兵，吾即去之。楚聞之，因用子常，退子期。吳拔六與潛二邑。

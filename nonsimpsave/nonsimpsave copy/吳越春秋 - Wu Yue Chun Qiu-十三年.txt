十三年，春，吳欲因楚葬而伐之，使公子蓋餘、燭傭以兵圍楚，使季札於晉，以觀諸侯之變。楚發兵絕吳後，吳兵不得還。於是公子光心動。伍胥知光之見機也，乃說光曰：「今吳王伐楚，二弟將兵，未知吉凶，專諸之事於斯急矣。時不再來，不可失也。」於是公子見專諸曰：「今二弟伐楚，季子未還，當此之時，不求何獲？時不可失。且光真王嗣也。」專諸曰：「僚可殺也，母老子弱，弟伐楚，楚絕其後。方今吳外困於楚，內無骨鯁之臣，是無如我何也。」
四月，公子光伏甲士於窋室中，具酒而請王僚。僚白其母，曰：「公子光為我具酒來請，期無變悉乎？」母曰：「光心氣怏怏，常有愧恨之色，不可不慎。」王僚乃被棠銕之甲三重，使兵衛陳於道，自宮門至於光家之門，階席左右皆王僚之親戚，使坐立侍，皆操長戟交軹。酒酣，公子光佯為足疾，入窋室裹足，使專諸置魚腸劍炙魚中進之。既至王僚前，專諸乃擘炙魚，因推匕首，立戟交軹倚專諸胸，胸斷臆開，匕首如故，以刺王僚，貫甲達背，王僚既死，左右共殺專諸，眾士擾動，公子光伏其甲士以攻僚眾，盡滅之。遂自立，是為吳王闔閭也。乃封專諸之子，拜為客卿。
季札使還至吳，闔閭以位讓，季札曰：「苟前君無廢，社稷以奉，君也。吾誰怨乎？哀死待生，以俟天命。非我所亂，立者從之，是前人之道，」命哭僚墓，復位而待。
公子蓋餘、燭傭二人將兵遇圍於楚者，聞公子光殺王僚自立，乃以兵降楚，楚封之於舒。
十三年，齊大夫陳成恆欲弒簡公，陰憚高、國、鮑、晏，故前興兵伐魯。魯君憂之，孔子患之，召門人而謂之曰：「諸侯有相伐者，丘常恥之。夫魯，父母之國也，丘墓在焉。今齊將伐之，子無意一出耶？」子路辭出，孔子止之；子張、子石請行，孔子弗許；子貢辭出，孔子遣之。
子貢北之齊，見成恆，因謂曰：「夫魯者，難伐之國，而君伐，過矣。」成而曰：「魯何難伐也？」
子貢曰：「其城薄以卑，其池狹以淺，其君愚而不仁，大臣無用，士惡甲兵，不可與戰。君不若伐吳。夫吳，城厚而崇，池廣以深，甲堅士選，器飽弩勁，又使明大夫守之，此易邦也。」
成之忿然作色，曰：「子之所難，人之所易；子之所易，人之所難，而以教，何也？」
子貢曰：「臣聞君三封而三不成者，大臣有所不聽者也。今君又欲破魯以廣齊，隳魯以自尊，而君功不與焉。是君上驕下恣群臣，而求以成大事，難矣。且夫上驕則犯，臣驕則爭，此君上於王有遽，而下與大臣交爭。如此則君立於齊危於累卵。故曰不如伐吳。且吳王剛猛而毅，能行其令，百姓習於戰守，明於法禁，齊遇為擒必矣。今君悉四境之中，出大臣以環之，人民外死，大臣內空，是君上無彊敵之臣，下無黔首之士，孤主制齊者，君也。」
陳恆曰：「善！雖然吾兵已在魯之城下矣。吾去之吳，大臣將有疑我之心，為之奈何？」
子貢曰：「君按兵無伐，請為君南見吳王，請之救魯而伐齊，君因以兵迎之。」陳恆許諾。
子貢南見吳王，謂吳王曰：「臣聞之，王者不絕世，而霸者無彊敵，千鈞之重，加銖而移。今萬乘之齊，而私千乘之魯，而與吳爭彊，臣竊為君恐焉。且夫救魯，顯名也；伐齊，大利也，義存亡魯，害暴齊而威強晉，則王不疑也。」
吳王曰：「善。雖然，吾嘗與越戰，棲之會稽，入臣於吳，不即誅之，三年使歸。夫越君，賢主，苦身勞力，夜以接日，內飾其政，外事諸侯，必將有報我之心。子待我伐越而聽子。」
子貢曰：「不可。夫越之彊不過於魯，吳之彊不過於齊，主以伐越而不聽臣，齊亦已私魯矣。且畏小越而惡彊齊，不勇也；見小利而忘大害，不智也。臣聞仁人不因居，以廣其德；智者不棄時，以舉其功；王者不絕世，以立其義。且夫畏越如此，臣誠東見越王，使出師以從下吏。」吳王大悅。
子貢東見越王，王聞之，除道郊迎，身御至舍。問曰：「此僻狹之國，蠻夷之民，大夫何索然若不辱乃至於此？」
子貢曰：「君處故來。」
越王勾踐再拜稽首曰：「孤聞禍與福為鄰，今大夫之弔，孤之福矣。孤敢不問其說。」
子貢曰：「臣今者見吳王，告以救魯而伐齊，其心畏越。且夫無報人之志而使人疑之，拙也；有報人之意而使人知之，殆也；事未發而聞之者，危也。三者，舉事之大忌也。」
越王再拜曰：「孤少失前人，內不自量與吳人戰，軍敗身辱，遁逃上棲會稽，下守海濱，唯魚鱉見矣。今大夫辱弔而身見之，又發玉聲以教孤，孤賴天之賜也，敢不承教？」
子貢曰：「臣聞：『明主任人，不失其能，直士舉賢，不容於世。』故臨財分利則使仁，涉患犯難則使勇，用智圖國則使賢，正天下定諸侯則使聖。兵強而不能行其威勢，在上位而不能施其政令於下者，其君幾乎難矣！臣竊自擇可與成功而至王者，惟幾乎？今吳王有伐齊晉之志，君無愛重器以喜其心，無惡卑辭以盡其禮。而伐齊，齊必戰，不勝，君之福也；彼戰而勝，必以其兵臨晉。騎士銳兵弊乎齊，重寶、車騎、羽毛盡乎晉，則君制其餘矣。」
越王再拜，曰：「昔者吳王分其民之眾以殘吾國，殺敗吾民，鄙吾百姓，夷吾宗廟，國為墟棘，身為魚鱉。孤之怨吳，深於骨髓，而孤之事吳，如子之畏父，弟之敬兄。此孤之死言也。今大夫有賜，故孤敢以報情。孤身不安重席，口不嘗厚味，目不視美色，耳不聽雅音，既已三年矣；焦脣乾舌，苦身勞力，上事群臣，下養百姓；願一與吳交戰於天下平原之野。正身臂而奮吳越之士，繼踵連死，肝腦塗地者，孤之願也。思之三年，不可得也，今內量吾國不足以傷吳，外事諸侯而不能也。願空國，棄群臣，變容貌，易姓名，執箕帚，養牛馬以事之。孤雖知要領不屬，手足異處，四支布陳，為鄉邑笑，孤之意出焉。今大夫有賜，存亡國，舉死人，孤賴天賜，敢不待令乎？」
子貢曰：「夫吳王為人，貪功名而不知利害。」越王慥然避位。
子貢曰：「臣觀吳王為數戰伐，士卒不恩，大臣內引，讒人益眾。夫子胥為人精誠中廉，外明而知時，不以身死隱君之過。正言以忠君，直行以為國，其身死而不聽，太宰嚭為人智而愚，彊而弱，巧言利辭以內其身，善為詭詐以事其君，知其前而不知其後，順君之過以安其私，是殘國傷君之佞臣也。」越王大悅。
子貢去，越王送之金百鎰，寶劍一，良馬二。子貢不受。
至吳，謂吳王曰：「臣以下吏之言告於越王，越王大恐，曰：『昔者孤身不幸，少失前人。內不自量，抵罪於吳，軍敗身辱，逋逃出走，棲于會稽，國為墟莽，身為魚鱉。賴大王之賜，使得奉俎豆，修祭祀，死且不敢忘，何謀之敢？』其志甚恐，將使使者來謝於王。」
子貢館五日，越使果來，曰：東海役臣勾踐之使者臣種敢修下吏，少聞於左右：昔孤不幸，少失前人，內不自量，抵罪上國，軍敗身辱，逋逃會稽，賴王賜，得奉祭祀，死且不忘。今竊聞大王興大義，誅彊救弱，困暴齊而撫周室，故使賤臣以奉前王所藏甲二十領，屈盧之矛，步光之劍，以賀軍吏。若將遂大義，弊邑雖小，請悉四方之內士卒三千人，以從下吏，請躬被堅執銳，以前受矢石，君臣死無所恨矣。」
吳王大悅。乃召子貢曰：「越使果來，請出士卒三千，其君從之，與寡人伐齊。可乎？」
子貢曰：「不可。夫空人之國，悉人之眾，又從其君，不仁也。受幣，許其師，辭其君即可。」吳王許諾。
子貢去晉，見定公曰：「臣聞慮不預定，不可以應卒；兵不預辦，不可以勝敵。今吳齊將戰，戰而不勝，越亂之必矣；與戰而勝，必以其兵臨晉，君為之奈何？」定公曰：「何以待之？」子貢曰：「修兵伏卒以待之。」晉君許之。
子貢返魯，吳王果興九郡之兵，將與齊戰。道出胥門，因過姑胥之臺，忽晝假寐於姑胥之臺而得夢。及寤而起，其心恬然悵焉。乃命太宰嚭告曰：「寡人晝臥有夢，覺而恬然悵焉。請占之，得無所憂哉？夢入章明宮，見兩鬲蒸而不炊；兩黑犬嗥以南，嗥以北；兩鋘殖吾宮牆；流水湯湯，越吾宮堂；後房鼓震篋篋有鍜工；前園橫生梧桐。子為寡人占之。」
太宰嚭曰：「美哉！王之興師伐齊也。臣聞：章者，德鏘鏘也；明者，破敵聲聞，功朗明也。兩鬲蒸而不炊者，大王聖德，氣有餘也。兩黑犬嗥以南、嗥以北者，四夷已服，朝諸侯也。兩鋘殖宮牆者，農夫就成，田夫耕也。湯湯越宮堂者，鄰國貢獻，財有餘也。後房篋篋鼓震有鍜工者，宮女悅樂，琴瑟和也。前園橫生梧桐者，樂府鼓聲也。
吳王大悅，而其心不已，召王孫駱問曰：「寡人忽晝夢，為予陳之。」
王孫駱曰：「臣鄙淺於道，不能博大，今王所夢，臣不能占。其有所知者，東掖門亭長長城公弟公孫聖。聖為人少而好游，長而好學，多見博觀，知鬼神之情狀。願王問之。」
王乃遣王孫駱往請公孫聖，曰：「吳王晝臥姑胥之臺，忽然感夢，覺而悵然，使子占之，急詣姑胥之臺。」
公孫聖伏地而泣，有項而起。其妻從旁謂聖曰：「子何性鄙！希睹人主，卒得急召，涕泣如雨。」
公孫聖仰天歎曰：「悲哉！非子所知也。今日壬午，時加南方，命屬上天，不得逃亡。非但自哀，誠傷吳王。」
妻曰：「子以道自達於主，有道當行，上以諫王，下以約身。今聞急召，憂惑潰亂，非賢人所宜。」
公孫聖曰：「愚哉！女子之言也。吾受道十年，隱身避害，欲紹壽命，不意卒得急召，中世自棄，故悲與子相離耳。」遂去，詣姑胥臺。
吳王曰：「寡人將北伐齊魯，道出胥門，過姑胥之臺，忽然晝夢，子為占之，其言吉凶。」
公孫聖曰：「臣不言，身名全，言之必死百段於王前。然忠臣不顧其軀。」乃仰天歎曰：「臣聞好船者必溺，好戰者必亡，臣好直言，不顧於命。願王圖之。臣聞：章者，戰不勝，敗走傽偟也。明者，去昭昭，就冥冥也。入門見鬲蒸而不炊者，大王不得火食也。兩黑犬嗥以南、嗥以北者，黑者，陰也，北者，匿也。兩鋘殖宮牆者，越軍入吳國，伐宗廟，掘社稷也。流水湯湯越宮堂者，宮空虛也。後房鼓震篋篋者，坐太息也。前園橫生梧桐者，梧桐心空不為用器，但為盲僮，與死人俱葬也。願大王按兵修德，無伐於齊，則可銷也。遣下吏太宰嚭、王孫駱解冠幘，肉袒徒跣，稽首謝於勾踐，國可安存也，身可不死矣。」
吳王聞之，索然作怒，乃曰：「吾天之所生，神之所使。」顧力士石番，以鐵鎚擊殺之。聖乃仰頭向天而言曰：「吁嗟！天知吾之冤乎？忠而獲罪，身死無辜以葬。我以為直者，不如相隨為柱，提我至深山，後世相屬為聲響。」於是吳三乃使門人提之蒸丘，「豺狼食汝肉，野火燒汝骨，東風數至，飛揚汝骸骨，肉縻爛，何能為聲響哉？」太宰嚭趨進曰：「賀大王喜，災已滅矣，因舉行觴，兵可以行。」
吳王乃使太宰嚭為右校司馬，王孫駱為左校，及從勾踐之師伐齊。伍子胥聞之，諫曰：「臣聞興十萬之眾，奉師千里，百姓之費，國家之出，日數千金。不念士民之死，而爭一日之勝，臣以為危國亡身之甚。且與賊居不知其禍，外復求怨，徼幸他國，猶治救瘑疥而棄心腹之疾，發當死矣。瘑疥，皮膚之疾，不足患也。今齊陵遲千里之外，更歷楚趙之界，齊為疾其疥耳；越之為病，乃心腹也。不發則傷，動則有死。願大王定越而後圖齊。臣之言決矣，敢不盡忠！臣今年老，耳目不聰，以狂惑之心，無能益國。竊觀金匱第八，其可傷也。」吳王曰：「何謂也？」子胥曰：「今年七月，辛亥平旦，大王以首事。辛，歲位也，亥，陰前之辰也。合壬子歲前合也，利以行武，武決勝矣。然德在合斗擊丑。丑，辛之本也。大吉為白虎而臨辛，功曹為太常所臨亥，大吉得辛為九醜，又與白虎并重。有人若以此首事，前雖小勝，後必大敗。天地行殃，禍不久矣。」
吳王不聽，遂九月使太宰嚭伐齊。軍臨北郊，吳王謂嚭曰：「行矣！無忘有功，無赦有罪，愛民養士，視如赤子；與智者謀，與仁者友。」太宰嚭受命，遂行。
吳王召大夫被離問曰：「汝常與子胥同心合志，并慮一謀，寡人興師伐齊，子胥獨何言焉？」被離曰：「子胥欲盡誠於前王，自謂老狂，耳目不聰，不知當世之所行，無益吳國。」
王遂伐齊，齊與吳戰於艾陵之上，齊師敗績。吳王既勝，乃使行人成好於齊，曰：「吳王聞齊有沒水之慮，帥軍來觀，而齊興師蒲草，吳不知所安，集設陣為備，不意頗傷齊師。願結和親而去。」齊王曰：「寡人處此北邊，無出境之謀。今吳乃濟江淮喻千里而來我壤土，戮我眾庶，賴上帝哀存，國猶不至顛隕。王今讓以和親，敢不如命？」吳齊遂盟而去。
吳王還，乃讓子胥曰：「吾前王履德明，達於上帝。垂功用力為子西結彊讎於楚。今前王譬若農夫之艾殺四方蓬蒿，以立名于荊蠻，斯亦大夫之力。今大夫昏耄而不自安，生變起詐，怨惡而出，出則罪吾士眾，亂吾法度，欲以妖孽挫衄吾師；賴天降哀，齊師受服。寡人豈敢自歸其功，乃前王之遺德，神靈之祐福也。若子於吳則何力焉？」
伍子胥攘臂大怒，釋劍而對曰：「昔吾前王有不庭之臣，以能遂疑計，不陷於大難。今王播棄所患，外不憂此孤僮之謀，非霸王之事。天所未棄，必趨其小喜，而近其大憂。王若覺寤，吳國世世存焉；若不覺寤，吳國之命斯促矣。員擒。員誠前死，掛吾目於門，以觀吳國之喪。」
吳王不聽，坐於殿上，獨見四人向庭相背而倚，王怪而視之。群臣問曰：「王何所見？」王曰：「吾見四人相背而倚，聞人言則四分走矣。」子胥曰：「如王言，將失眾矣。」吳王怒曰：「子言不祥！」子胥曰：「非惟不祥，王亦亡矣。」
後五日，吳王復坐殿上，望見兩人相對，北向人殺南向人。王問群臣：「見乎？」曰：「無所見。」子胥曰：「王何見？」王曰：「前日所見四人，今日又見二人相對，北向人殺南向人。」子胥曰：「臣聞，四人走，叛也；北向殺南向，臣殺君也。」王不應。
吳王置酒文臺之上，群臣悉在，太宰嚭執政，越王侍坐，子胥在焉。王曰：「寡人聞之，君不賤有功之臣，父不憎有力之子。今太宰嚭為寡人有功，吾將爵之上賞。越王慈仁忠信，以孝事於寡人，吾將復增其國，以還助伐之功。於眾大夫如何？」
群臣賀曰：「大王躬行至德，虛心養士，群臣並進，見難爭死；名號顯著，威震四海；有功蒙賞，亡國復存；霸功王事，咸被群臣。」
於是子胥據地垂涕，曰：「於乎，哀哉！遭此默默，忠臣掩口，讒夫在側；政敗道壞，諂諛無極；邪說偽辭，以曲為直，舍讒攻忠，將滅吳國：宗廟既夷，社稷不食，城郭丘墟，殿生荊棘。」
吳王大怒，曰：「老臣多詐，為吳妖孽。乃欲專權擅威，獨傾吾國。寡人以前王之故，未忍行法，今退自計，無沮吳謀。」
子胥曰：「今臣不忠不信，不得為前王之臣。臣不敢愛身，恐吾國之亡矣。昔者桀殺關龍逢，紂殺王子比干，今大王誅臣，參於桀紂。大王勉之，臣請辭矣。」
子胥歸，謂被離曰：「吾貫弓接矢於鄭楚之界，越渡江淮自致於斯。前王聽從吾計，破楚見凌之讎。欲報前王之恩而至於此。吾非自惜，禍將及汝。」被離曰：「未諫不聽，自殺何益？何如亡乎？」子胥曰：「亡，臣安往？」
吳王聞子胥之怨恨也，乃使人賜屬鏤之劍。子胥受劍，徒跣褰裳，下堂中庭，仰天呼怨曰：「吾始為汝父忠臣立吳，設謀破楚，南服勁越，威加諸侯，有霸王之功。今汝不用吾言，反賜我劍。吾今日死，吳宮為墟，庭生蔓草，越人掘汝社稷。安忘我乎？昔前王不欲立汝，我以死爭之，卒得汝之願，公子多怨於我。我徒有功於吳。今乃忘我定國之恩。反賜我死，豈不謬哉！」吳王聞之，大怒，曰：「汝不忠信，為寡人使齊，託汝子於齊鮑氏，有我外之心。」急令自裁：「孤不使汝得有所見。」子胥把劍仰天歎曰：「自我死後，後世必以我為忠，上配夏殷之世，亦得與龍逄、比干為友。」遂伏劍而死。
吳王乃取子胥屍，盛以鴟夷之器，投之於江中，言曰：「胥汝一死之後，何能有知？」即斷其頭，置高樓上，謂之曰：「日月炙汝肉，飄風飄汝眼，炎光燒汝骨，魚鱉食汝肉。汝骨變形灰，有何所見？」乃棄其軀，投之江中。子胥因隨流揚波，依潮來往，蕩激崩岸。
於是吳王謂被離曰：「汝嘗與子胥論寡人之短。」乃髡被離而刑之。
王孫駱聞之，不朝，王召而問曰：「子何非寡人而不朝乎？」駱曰：「臣恐耳。」曰：「子以我殺子胥為重乎？」駱曰：「大王氣高，子胥位下，王誅之。臣命何異於子胥？臣以是恐也。」王曰：「非聽宰嚭以殺子胥，胥圖寡人也。」駱曰：「臣聞人君者，必有敢諫之臣，在上位者，必有敢言之交。夫子胥，先王之老臣也，不忠不信，不得為前王臣。」吳王中心悷然，悔殺子胥：「豈非宰嚭之讒子胥？」而欲殺之。駱曰：「不可。王若殺嚭，此為二子胥也。」於是不誅。
